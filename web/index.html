<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NoButt Test</title>
    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <div class="page">
      <div class="options-header">
        <span class="option" id="server-connection-bulb"></span>
      </div>

      <div class="tab-header">
        <div class="tab-link" data-tab="element-grid">Toy</div>
        <div class="tab-link" data-tab="log-console">Log</div>
      </div>
      <hr />
      <div id="element-grid" class="tab-content">
        <!-- <div class="element-wrapper long-element-wrapper"></div> -->
      </div>
      <div id="log-console" class="tab-content"><div id="logs"></div></div>
    </div>
  </body>

  <script src="components/console.js"></script>
  <script src="components/tab-selector.js"></script>
  <script src="components/websocket.js"></script>
  <script src="components/index.js"></script>
  <script src="components/toy.js"></script>
  <script type="text/javascript">
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
    new Toy("element-grid");
  </script>
</html>
<!-- initWebSocket() {
        let plug_vibration_level = 0;
        let socket;
        let serverIndicatorStages = [
          "Server offline",
          "Server connected",
          "Error",
        ];
        const bulb = document.getElementById("server-connection-bulb");
        socket = new WebSocket("ws://127.0.0.1:12345/ui");
        console.log("WebSocket created");
        handleMessage2(socket);
        socket.addEventListener("open", (event) => {
          bulb.classList.add("active");
          bulb.title = serverIndicatorStages[1];
        });
        socket.addEventListener("close", (event) => {
          bulb.classList.remove("active");
          bulb.title = serverIndicatorStages[0];
        });
        socket.addEventListener("error", (event) => {
          bulb.classList.add("error");
          bulb.title = serverIndicatorStages[2];
          console.error("WebSocket error: ", event);
          logToConsole("WebSocket error");
          setTimeout(function () {
            bulb.classList.remove("error");
          }, 500);
        });
        socket.addEventListener("message", function (event) {
          console.log("Message from server ", event.data);
          logToConsole("Message from server: " + event.data);
          const message = JSON.parse(event.data);
          handleMessage(message);
        });
        function handleMessage(message) {
          if (message.s)
            if (message.ScalarCmd && message.ScalarCmd.Scalars) {
              handleScalarCmd(message);
            } else if (message.StopAllDevices || message.StopDevice) {
              handleStopCmd(message);
            } else {
              console.warn("Unknown message type: ", message);
            }
        }
        function handleScalarCmd(message) {
          console.log("Received scalar: ", message.ScalarCmd.Scalars[0].Scalar);
          plug_vibration_level = message.ScalarCmd.Scalars[0].Scalar;
          // infinite shaking animation
          document.getElementById("plug").style.animation = `shake ${
            (1 - plug_vibration_level) / 2
          }s infinite`;
        }
        function handleStopCmd(message) {
          console.log("Received stop command");
          plug_vibration_level = 0;
          // stop shaking animation
          document.getElementById("plug").style.animation = "";
        }
      } -->
